# ๐ ุฑุงูููุง ุงุฌุฑุง Nerd Agent Server ุจุง FastAPI

## ูุตุจ Dependencies

ุงุจุชุฏุง ฺฉุชุงุจุฎุงููโูุง ููุฑุฏ ูุงุฒ ุฑุง ูุตุจ ฺฉูุฏ:

```bash
pip install -r requirements.txt
```

## ุงุฌุฑุง ุณุฑูุฑ

### ุฑูุด 1: ุงุฌุฑุง ูุณุชูู
```bash
python app.py
```

### ุฑูุด 2: ุงุฌุฑุง ุจุง uvicorn
```bash
uvicorn app:app --host 0.0.0.0 --port 8000 --reload
```

## ุชูุงูุชโูุง ุงุตู ุจุง ุณุฑูุฑ Node.js

### โ ูุฒุงุง:
1. **ุงุณุชูุงุฏู ูุณุชูู ุงุฒ Transformers**: ุฏฺฏุฑ ูุงุฒ ุจู Ollama ูุณุช
2. **ุจูููโุณุงุฒ ุญุงูุธู**: ูุฏู ฺฉุจุงุฑ ุจุงุฑฺฏุฐุงุฑ ูโุดูุฏ ู ุฏุฑ ุญุงูุธู ุจุงู ูโูุงูุฏ
3. **Type Safety**: ุงุณุชูุงุฏู ุงุฒ Pydantic ุจุฑุง validation
4. **Async/Await**: ูพุฑุฏุงุฒุด ุบุฑููุฒูุงู ุจุฑุง ฺฉุงุฑุง ุจูุชุฑ
5. **ูุงฺฏูฺฏ ุญุฑููโุง**: ูุงฺฏโูุง ุฏููโุชุฑ ู ุฎูุงูุงุชุฑ

### ๐ API Endpoints:

#### 1. Health Check
```bash
GET /health
```

#### 2. Upload Image
```bash
POST /api/upload-image
Content-Type: application/json

{
  "image": "data:image/png;base64,iVBORw0KGg..."
}
```

#### 3. Chat
```bash
POST /api/chat
Content-Type: application/json

{
  "messages": [
    {
      "role": "user",
      "content": [
        {"type": "text", "text": "ุชูุถุญ ุงู ุชุตูุฑ"},
        {"type": "image", "url": "/api/images/123"}
      ]
    }
  ],
  "model": "gemma3n-e4b"
}
```

#### 4. Get Image
```bash
GET /api/images/{image_id}
```

## ุชูุธูุงุช ูุฏู

ูุฏู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ Hugging Face ุฏุงูููุฏ ูโุดูุฏ. ุงฺฏุฑ ูโุฎูุงูุฏ ุชูุธูุงุช ุฑุง ุชุบุฑ ุฏูุฏ:

- `max_new_tokens`: ุญุฏุงฺฉุซุฑ ุชุนุฏุงุฏ ุชูฺฉูโูุง ุชููุฏ (ูพุดโูุฑุถ: 2048)
- `temperature`: ูุฒุงู ุฎูุงูุช ูุฏู (ูพุดโูุฑุถ: 0.7)
- `do_sample`: ูุนุงูโุณุงุฒ ูููููโุจุฑุฏุงุฑ (ูพุดโูุฑุถ: True)

## ูฺฉุงุช ููู

1. **ุญุงูุธู GPU**: ูุฏู Gemma-3n-e4b ูุงุฒ ุจู ุญุฏุงูู 8GB VRAM ุฏุงุฑุฏ
2. **ุงููู ุงุฌุฑุง**: ุฏุงูููุฏ ูุฏู ููฺฉู ุงุณุช ฺูุฏ ุฏููู ุทูู ุจฺฉุดุฏ
3. **ุชุตุงูุฑ**: ุชุตุงูุฑ ุจุฑุง 1 ุณุงุนุช ุฏุฑ ุญุงูุธู ูฺฏูุฏุงุฑ ูโุดููุฏ
4. **CORS**: ุจู ุตูุฑุช ูพุดโูุฑุถ ุจุฑุง ููู origin ูุง ูุนุงู ุงุณุช

## ููุงุณู ุนููฺฉุฑุฏ

| ูฺฺฏ | Node.js + Ollama | FastAPI + Transformers |
|-------|------------------|------------------------|
| ุฒูุงู ุจุงุฑฺฏุฐุงุฑ ูุฏู | ูุฑ ุจุงุฑ ูุฑุงุฎูุงู | ฺฉุจุงุฑ ุฏุฑ startup |
| ุงุณุชูุงุฏู ุงุฒ RAM | ฺฉูุชุฑ | ุจุดุชุฑ (ูุฏู ุฏุฑ ุญุงูุธู) |
| ุณุฑุนุช ูพุงุณุฎ | ูุชูุณุท | ุณุฑุนโุชุฑ (ุจุฏูู overhead) |
| ูุงุจุณุชฺฏโูุง | ูุงุฒ ุจู Ollama | ููุท Python |

## Troubleshooting

### ุฎุทุง CUDA/GPU
ุงฺฏุฑ GPU ุฏุฑ ุฏุณุชุฑุณ ูุณุชุ ูุฏู ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุฑู CPU ุงุฌุฑุง ูโุดูุฏ (ฺฉูุฏุชุฑ).

### ุฎุทุง ุญุงูุธู
ุฏุฑ ุตูุฑุช ฺฉูุจูุฏ RAMุ ูโุชูุงูุฏ ูุฏู ฺฉูฺฺฉโุชุฑ ุงุณุชูุงุฏู ฺฉูุฏ ุง `torch_dtype` ุฑุง ุจู `torch.float16` ุชุบุฑ ุฏูุฏ.

### ุฎุทุง ุฏุงูููุฏ ูุฏู
ูุทูุฆู ุดูุฏ ุงุชุตุงู ุงูุชุฑูุช ุจุฑูุฑุงุฑ ุงุณุช ู ุฏุณุชุฑุณ ุจู huggingface.co ูุฌูุฏ ุฏุงุฑุฏ.
